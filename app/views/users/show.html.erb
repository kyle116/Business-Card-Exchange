<h1>Wallet</h1>

<% if @user.id == current_user.id %>
  <%= link_to 'Edit/Delete', edit_user_path %>
<% end %>


<p>Find me in app/views/users/show.html.erb</p>



<div class="col-md-3 the-sidebar">
  <div class="profile-sidebar">
    <!-- SIDEBAR USERPIC -->
    <div class="profile-userpic">
      <img src="" class="img-responsive" alt="">
    </div>
    <!-- END SIDEBAR USERPIC -->
    <!-- SIDEBAR USER TITLE -->
    <div class="profile-usertitle">
      <div class="profile-usertitle-name">
        <%= @user.name %>
      </div>
      <div class="profile-usertitle-job">
        <%= @user.job_title %>
      </div>
    </div>
    <!-- END SIDEBAR USER TITLE -->
    <!-- SIDEBAR BUTTONS -->
    <div class="profile-userbuttons">
      <!-- TENTATIVE NOT SURE WHERE THE ADD BUTTON SHOULD BE -->

      <% if @user.id.to_s == current_user.id.to_s%>

      <% elsif current_user.business_cards.where(contact_id:@user.id).count == 0 %>
        <button type="button" class="btn btn-success btn-sm"><%= link_to 'Add', bc_create_path(@user.id) %></button>
      <% end %>

    </div>
    <!-- END SIDEBAR BUTTONS -->
    <!-- SIDEBAR MENU -->
    <div class="profile-usermenu">
      <ul class="nav">
        <li>
          <a class="profile-att">
          <i class="glyphicon glyphicon-user"></i>
          <%= @user.username %> </a>
        </li>
        <li>
          <a class="profile-att">
          <i class="glyphicon glyphicon-earphone"></i>
          <%= @user.phone_number %> </a>
        </li>
        <li>
          <a class="profile-att">
          <i class="glyphicon glyphicon-envelope"></i>
          <%= @user.email %> </a>
        </li>
        <li>
          <a class="profile-att">
          <i class="glyphicon glyphicon-globe"></i>
          <%= @user.website %> </a>
        </li>
        <li>
          <a class="profile-att">
          <i class="glyphicon glyphicon-home"></i>
          <%= @user.address %> </a>
        </li>
        <li>
          <a class="profile-att">
          <i class="glyphicon glyphicon-briefcase"></i>
          <%= @user.company_name %> </a>
        </li>
      </ul>
    </div>
    <!-- END MENU -->
  </div>
</div>





<div class="card user_card">
    <h2><%= @user.company_name %></h2>
    <h3><%= @user.name %></h3>
    <p><%= @user.job_title %></p>
    <p><%= @user.phone_number %></p>
    <p><%= @user.email %></p>
    <p><%= @user.website %></p>
    <p><%= @user.address %></p>
</div>

<% unless @user.business_cards.empty? %>
  <% @user.business_cards.each do |b| %>
    <div class="card">

      <h2><%= b.contact.company_name %></h2>
      <h3><%= b.contact.name %></h3>
      <p><%= b.contact.job_title %></p>
      <p><%= b.contact.phone_number %></p>
      <p><%= b.contact.email %></p>
      <p><%= b.contact.website %></p>
      <p><%= b.contact.address %></p>
      <% if @user.id == current_user.id %>
        <% if b.note %>
          <p>Notes: <%= b.note.body %></p>
          <%= link_to 'Edit', user_path(@user) + '?edit=' + b.note.id.to_s %>
          <% if params[:edit] == b.note.id.to_s %>
            <%= form_for @note, :url => edit_note_path(@user) do |n| %>
              <%= n.text_field :body, placeholder:"Edit Note" %>
              <%= n.hidden_field :business_card_id, value: b.id %>
              <%= n.submit%>
            <% end %>
          <% end %>
        <%= link_to('Delete', delete_note_path(@user.id,b.note.id), method: :delete) %>
        <% else %>
          <%= form_for @note, :url => new_note_path(@user) do |n| %>
            <%= n.text_field :body, placeholder:"Note description" %>
            <%= n.hidden_field :business_card_id, value: b.id%>
            <%= n.submit %>
          <% end %>
        <% end %>
      <% end %>

    </div>

  <% end %>
<% end %>
